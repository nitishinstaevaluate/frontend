<div *ngIf="modelControl.excessEarning.type === 'Excess_Earnings' && formOneData && next === 4">
    <h4 class="card-header">{{modelControl.excessEarning.header}}</h4>
    <form [formGroup]="excessEarningForm" class="outer-wrapper">
        <div class="row" >

            <div class="col-md-12">
                <div class='c-decorated-header'>
                    <h3><span style="padding-left: 2%;">Excess Earnings</span></h3>
                    <div class='c-decorated-header_link-view-more'>
                    </div>
                  </div>
            </div>
            <!-- discount rate -->
            <div class="col-md-4 field" style="padding-top:1%">
                <!-- <mat-form-field class="full-width-input mat-relative-val" [floatLabel]="floatLabelType" >
                    <mat-label>Discount Rate</mat-label>    
                    <mat-select class="mat-select-value" formControlName="discountRate">
                        <mat-option *ngFor="let doc of discountR"  [value]="getDocList(doc)">{{doc.label}}</mat-option>
                        </mat-select>
                  </mat-form-field> -->

                  <div class="material-textfield">
                    <select id="discountRate" class="new-inp" formControlName="discountRate">
                      <option value="" disabled selected>Select discount Rate</option>
                      <option *ngFor="let doc of discountR" [ngValue]="getDocList(doc)">{{ doc.label }}</option>
                    </select>
                    <label for="discountRate">Discount Rate</label>
                  </div>
                  <span *ngIf="excessEarningForm.controls['discountRate'].touched && excessEarningForm.controls['discountRate'].errors">
                    <span *ngIf="hasError('discountRate','required',excessEarningForm)" class="error-text">Please select discount rate</span>
                  </span>
            </div>

            <!-- discount period -->
            <div class="col-md-4 field" style="padding-top:1%">
                <!-- <mat-form-field class="full-width-input mat-relative-val" [floatLabel]="floatLabelType">
                    <mat-label>Discount Period</mat-label>
                    <mat-select class="mat-select-value" formControlName="discountingPeriod">
                    <mat-option *ngFor="let doc of modelControl.excessEarning.options.discountPeriod.options"  [value]="doc.name">{{doc.name}}</mat-option>
                    </mat-select>
                  </mat-form-field> -->

                  <div class="material-textfield">
                    <select id="discountingPeriod" class="new-inp" formControlName="discountingPeriod">
                      <option value="" disabled selected>Select discount period</option>
                      <option *ngFor="let doc of modelControl.excessEarning.options.discountPeriod.options" [ngValue]="doc.name">{{ doc.name }}</option>
                    </select>
                    <label for="discountingPeriod">Discount Period</label>
                  </div>
                  <span *ngIf="excessEarningForm.controls['discountingPeriod'].touched && excessEarningForm.controls['discountingPeriod'].errors">
                    <span *ngIf="hasError('discountingPeriod','required',excessEarningForm)" class="error-text">Please select discounting period</span>
                  </span>
            </div>

            <!-- cost of equity -->
            <div class="col-md-4 field" style="padding-top:1%">
                <!-- <mat-form-field class="full-width-input mat-relative-val" [floatLabel]="floatLabelType" >
                    <mat-label>Cost Of Equity</mat-label>
                    <mat-select class="mat-select-value" formControlName="coeMethod">
                    <mat-option *ngFor="let doc of equityM"  [value]="doc.type">{{doc.label}}</mat-option>
                    </mat-select>
                  </mat-form-field> -->

                  <div class="material-textfield">
                    <select id="coeMethod" class="new-inp" formControlName="coeMethod">
                      <option value="" disabled selected>Select cost of equity</option>
                      <option *ngFor="let doc of equityM"  [ngValue]="doc.type">{{ doc.label }}</option>
                    </select>
                    <label for="coeMethod">Cost Of Equity</label>
                  </div>
                  <span *ngIf="excessEarningForm.controls['coeMethod'].touched && excessEarningForm.controls['coeMethod'].errors">
                    <span *ngIf="hasError('coeMethod','required',excessEarningForm)" class="error-text">Please select cost of equity</span>
                  </span>
            </div>

            <!-- risk free rate -->
            <div class="col-md-4 field">
                <!-- <mat-form-field class="full-width-input mat-relative-val" [floatLabel]="floatLabelType" >
                    <mat-label>Risk Free Rate</mat-label>
                    <mat-select class="mat-select-value" formControlName="riskFreeRate">
                    <mat-option *ngFor="let doc of indianTreasuryY"  [value]="doc.latest">Yield on {{ doc.maturityInYrs }} Years Indian Treasury Bond</mat-option>
                </mat-select>
                <mat-hint *ngIf="excessEarningForm.controls['riskFreeRate'].value" class="taxrate-hint">Risk-Free rate is {{excessEarningForm.controls['riskFreeRate'].value}}%</mat-hint>
                </mat-form-field> -->

                <div class="material-textfield">
                  <select id="riskFreeRate" class="new-inp" formControlName="riskFreeRate">
                    <option value="" disabled selected>Select risk free rate</option>
                    <option value="customRiskFreeRate">Custom</option>
                    <option *ngFor="let doc of modelControl.excessEarning.options.riskFreeRate.options"  [ngValue]="doc.latest">Yield on {{ doc.maturityInYrs }} Years Indian Treasury Bond</option>
                  </select>
                  <label for="riskFreeRate">Risk Free Rate</label>
                <mat-hint *ngIf="excessEarningForm.controls['riskFreeRate'].value" class="taxrate-hint">Risk-Free rate is {{excessEarningForm.controls['riskFreeRate'].value === 'customRiskFreeRate' ? customRiskFreeRate : excessEarningForm.controls['riskFreeRate'].value}}%</mat-hint>
                </div>
                <span *ngIf="excessEarningForm.controls['riskFreeRate'].touched && excessEarningForm.controls['riskFreeRate'].errors">
                  <span *ngIf="hasError('riskFreeRate','required',excessEarningForm)" class="error-text">Please select risk free rate</span>
                </span>
            </div>

            <!-- expected market return -->
            <div class="col-md-4 field">
                  <div class="material-textfield">
                    <select id="expMarketReturnType" class="new-inp" formControlName="expMarketReturnType">
                      <option value="" disabled selected>Select expected market return</option>
                      <option *ngFor="let doc of modelControl.excessEarning.options.expMarketReturnType.options" [ngValue]="doc.name">{{doc.name}}</option>
                    </select>
                    <label for="expMarketReturnType">Expected Market Return</label>
                  <mat-hint *ngIf="excessEarningForm.controls['expMarketReturn'].value" class="taxrate-hint">Expected Market Return is {{excessEarningForm.controls['expMarketReturn'].value.toFixed(2)}}%</mat-hint>
                  </div>
                  <span *ngIf="excessEarningForm.controls['expMarketReturnType'].touched && excessEarningForm.controls['expMarketReturnType'].errors">
                    <span *ngIf="hasError('expMarketReturnType','required',excessEarningForm)" class="error-text">Please select expected market return</span>
                  </span>
            </div>

            <!-- beta -->
            <div class="col-md-4 field">
                  <div class="material-textfield">
                    <select id="betaType" class="new-inp" formControlName="betaType" (change)="betaChange($event)">
                      <option value="" disabled selected>Select beta</option>
                      <option *ngFor="let doc of modelControl.excessEarning.options.betaType.options"  [ngValue]="doc.value">{{doc.name}}</option>
                    </select>
                    <label for="betaType">Beta</label>
                  <!-- <mat-hint *ngIf="excessEarningForm.controls['beta'].value" class="taxrate-hint">Beta is {{excessEarningForm.controls['beta'].value.toFixed(2)}}</mat-hint> -->
                  </div>
                  <span *ngIf="excessEarningForm.controls['betaType'].touched && excessEarningForm.controls['betaType'].errors">
                    <span *ngIf="hasError('betaType','required',excessEarningForm)" class="error-text">Please select beta</span>
                  </span>
                  <div style="display: flex; align-items: center;padding-left: 2%;padding-top: 1%;height: 30px;">
                    <span style="width: 90%;" *ngIf="excessEarningForm.controls['betaType'].value">
                      <span *ngIf="excessEarningForm.controls['betaType'].value !== 'market_beta'">
                        <input type="radio" style="vertical-align: middle;" [checked]="selectedSubBetaType === 'meanBeta'" (change)="onRadioButtonChange($event)" value="meanBeta" name="betaRadio" id="betaRadio">
                        <span class="reset-ind3" style="vertical-align: middle;">Mean</span>
                      </span>

                      <span style="padding-left: 14%;" *ngIf="excessEarningForm.controls['betaType'].value !== 'market_beta'">
                        <input type="radio" style="vertical-align: middle;" [checked]="selectedSubBetaType === 'medianBeta'" (change)="onRadioButtonChange($event)" value="medianBeta" name="betaRadio" id="betaRadio">
                        <span class="reset-ind3" style="vertical-align: middle;">Median</span>
                      </span>
                      <span [ngClass]="excessEarningForm.controls['betaType'].value === 'market_beta' ? '' :  'add-padding-beta'">
                        <mat-hint *ngIf="excessEarningForm.controls['beta'].value" style="vertical-align: middle;font-size: 11px;color: #1915bb;" class="reset-ind3">Beta is {{excessEarningForm.controls['beta'].value?.toFixed(2)}}</mat-hint>
                      </span>
                    </span>
                    <span>
                      <mat-progress-spinner style="vertical-align: middle" *ngIf="betaLoader" class="beta-spin" mode="indeterminate" diameter="20"></mat-progress-spinner>
                    </span>
                  </div>
            </div>
            
            <!-- risk premium -->
            <div class="col-md-4 field" style="padding-top: 1%;">
                <div class="material-textfield">
                  <input class="new-inp" (click)="onSlideToggleChange($event)" formControlName="riskPremium" [type]="modelControl.excessEarning.options.riskPremium.type" placeholder="Enter risk premium"/>
                  <label>Specific Risk Premium</label>
                </div>
              <span *ngIf="excessEarningForm.controls['riskPremium'].touched && excessEarningForm.controls['riskPremium'].errors">
                <span *ngIf="hasError('riskPremium','required',excessEarningForm)" class="error-text">Please add specific risk premium</span>
              </span>
              </div>
            

            <div class="col-md-12" *ngIf="(adjCoe !== null && adjCoe !== 0)   && (coe !== null && coe !== 0)">
                   
                <div class='c-decorated-header-coe'>
                    <h3><span style="padding-left: 2%;">Estimated Cost of Equity</span></h3>
                    <div class='c-decorated-header_link-view-more'>
                    </div>
                  </div>
            </div>
            <div class="col-md-12 text-center" style="padding: 2%; padding-top: 1%;padding-bottom: 1%;" *ngIf="(adjCoe !== null && adjCoe !== 0)   && (coe !== null && coe !== 0)">
                <div >
                    <div class="row">
                      <div class="col-md-6">
                        <div class="card border-0">
                          <div class="card-body">
                            <span class="card-title">Cost Of Equity</span>
                            <span class="separator"></span>
                            <span class="card-text">{{coe.toFixed(2)}}%</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="card border-0">
                          <div class="card-body">
                            <span class="card-title">Adjusted Cost Of Equity</span>
                            <span class="separator"></span>
                            <span class="card-text">{{adjCoe.toFixed(2)}}%</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

            </div>

            <div class="col-md-12" *ngIf="specificRiskPremiumModalForm.controls['companySize'].value || specificRiskPremiumModalForm.controls['marketPosition'].value || specificRiskPremiumModalForm.controls['liquidityFactor'].value || specificRiskPremiumModalForm.controls['competition'].value">
                <div class='c-decorated-header-rp'>
                    <h3><span style="padding-left: 2%;">Risk Premium</span></h3>
                    <div class='c-decorated-header_link-view-more'>
                    </div>
                  </div>
            </div>
            <div class="card-container col-md-12" style="padding: 2%;padding-top: 1%;" *ngIf="specificRiskPremiumModalForm.controls['companySize'].value || specificRiskPremiumModalForm.controls['marketPosition'].value || specificRiskPremiumModalForm.controls['liquidityFactor'].value || specificRiskPremiumModalForm.controls['competition'].value">
                <div class="row">
                    <div class="col-md-3">
                        <div class="card card-est">
                            <div class="card-subtext"><span class="rp-relate-icon"><mat-icon> business</mat-icon></span>{{specificRiskPremiumModalForm.controls['companySize'].value}}%</div>
                            <div class="card-header-rp card-header">Company Size <span class="rp-icon"><mat-icon>keyboard_arrow_right</mat-icon></span></div>
                          </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card card-est">
                            <div class="card-subtext"><span class="rp-relate-icon"><mat-icon>view_column</mat-icon></span>{{specificRiskPremiumModalForm.controls['marketPosition'].value}}%</div>
                            <div class="card-header-rp card-header">Market Position <span class="rp-icon"><mat-icon >keyboard_arrow_right</mat-icon></span></div>
                          </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card card-est">
                            <div class="card-subtext"><span class="rp-relate-icon"><mat-icon>how_to_vote</mat-icon></span>{{specificRiskPremiumModalForm.controls['liquidityFactor'].value}}%</div>
                            <div class="card-header-rp card-header">Liquidity Factor <span class="rp-icon"><mat-icon>keyboard_arrow_right</mat-icon></span></div>
                          </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card card-est">
                            <div class="card-subtext"><span class="rp-relate-icon"><mat-icon>whatshot</mat-icon></span>{{specificRiskPremiumModalForm.controls['competition'].value}}%</div>
                            <div class="card-header-rp card-header">Competition <span class="rp-icon"><mat-icon>keyboard_arrow_right</mat-icon></span></div>
                          </div>
                    </div>
                </div>
              </div>

            <div class="loader-container" *ngIf="isLoader">
                <div class="loader">
                  <div class="text">Please Wait</div>
                  <div class="dots-container">
                    <div class="dot dot1"></div>
                    <div class="dot dot2"></div>
                    <div class="dot dot3"></div>
                  </div>
                </div>
              </div>
            

              <div class="col-md-12 btn-prop">
                <button (click)="previous()" mat-raised-button class="button-back-mat">
                  <span class="button-back"><mat-icon>send</mat-icon></span>
                    Back
                    <!-- <mat-icon>arrow_left</mat-icon> -->

                </button>

            <button (click)="saveAndNext()" class="button-save-mat" mat-raised-button>
                Next
                <span class="button-save"><mat-icon>send</mat-icon></span>
             </button>
        </div>
        </div>
      </form>  
</div>