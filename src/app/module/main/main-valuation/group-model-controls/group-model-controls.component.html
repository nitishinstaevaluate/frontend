<div class="outer-section" *ngIf="step === 1">
    <div class="outer-wrapper" *ngIf="modelControl.modelValuation.type === 'modelValuation'">
    <!-- <h4 class="card-header" >Company Details</h4> -->
    <div class='c-decorated-header'>
      <h3><span style="padding-left: 2%;">Company Details</span></h3>
      <div class='c-decorated-header_link-view-more'>
      </div>
    </div>
    <form [formGroup]="modelValuation">
        <div class="row">
          <!-- <div class="col-md-12 revalmodel" style="border-top: 1px solid #ccdfe3">
            <mat-label class="label">Company Details</mat-label>
            <span class="mat-bullet"><mat-icon>fiber_manual_record</mat-icon></span>
          </div> -->

            <!-- company -->
         
              <div class="col-md-6 field" style="padding-top: 1%;">
                <div class="material-textfield">
                  <input class="new-inp" placeholder="Add company" type="text" formControlName="company" />
                  <label>Company Name</label>
                  <span class="tool-class">
                    <!-- <svg matTooltip="This are the company details" matTooltipPosition="above" style="color: blue" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 512 512"><title>ionicons-v5-e</title>
                      <path d="M248,64C146.39,64,64,146.39,64,248s82.39,184,184,184,184-82.39,184-184S349.61,64,248,64Z" style="fill:none;stroke:#6200ee;stroke-miterlimit:10;stroke-width:32px" 
                      fill="#ff0000"></path><polyline points="220 220 252 220 252 336" style="fill:none;stroke:#6200ee;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px">
                      </polyline><line x1="208" y1="340" x2="296" y2="340" style="fill:none;stroke:#6200ee;stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px">

                    </line><path d="M248,130a26,26,0,1,0,26,26A26,26,0,0,0,248,130Z" fill="#ff0000"></path></svg> -->

                    <svg matTooltip="This are the company details" matTooltipPosition="above" style="color: 6200ee" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 256 256"><rect  fill="none"></rect>
                      <circle cx="128" cy="128" r="96" fill="none" stroke="#6200ee" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></circle>
                      <polyline points="120 124 128 124 128 176 136 176" fill="none" stroke="#6200ee" stroke-linecap="round" stroke-linejoin="round" stroke-width="24"></polyline>
                      <circle cx="126" cy="84" r="16" fill="#6200ee"></circle></svg>
                  </span>
                </div>
                <span *ngIf="modelValuation.controls['company'].touched && modelValuation.controls['company'].errors">
                  <span *ngIf="hasError('company','required',modelValuation)" class="error-text">Please enter company name</span>
                </span>
              </div>
            
                <!--valuation date  -->
                <div class="col-md-6 field" style="padding-top: 1%;">
                    <div class="material-textfield">
                      <input class="new-inp" formControlName="valuationDate" [placeholder]="modelControl.modelValuation.options.valuationDate.placeholder" type="date" />
                      <label>Valuation Date</label>
                    </div>
                    <span *ngIf="modelValuation.controls['valuationDate'].touched && modelValuation.controls['valuationDate'].errors">
                      <span *ngIf="hasError('valuationDate','required',modelValuation)" class="error-text">Please select valuation date</span>
                    </span>
                </div>

                <!-- Reporting unit -->
                <div class="col-md-6 field">
                  <div class="material-textfield">
                    <select id="reportingUnit" class="new-inp" formControlName="reportingUnit">
                      <option value="" disabled selected>Select reporting unit</option>
                      <option *ngFor="let doc of modelControl.reportDetails.options.reportingUnit"  [value]="doc.value">{{ doc.name }}</option>
                    </select>
                    <label for="reportingUnit">Units</label>
                  </div>
                  <span *ngIf="modelValuation.controls['reportingUnit'].touched && modelValuation.controls['reportingUnit'].errors">
                    <span *ngIf="hasError('reportingUnit','required',modelValuation)" class="error-text">Please select reporting unit</span>
                  </span>
              </div>

              <!-- currency unit -->
              <div class="col-md-6 field">
                <div class="material-textfield">
                  <select id="currencyUnit" class="new-inp" formControlName="currencyUnit">
                    <option value="" disabled selected>Select currency</option>
                    <option *ngFor="let doc of modelControl.reportDetails.options.currencyUnit"  [value]="doc.value">{{ doc.name }}</option>
                  </select>
                  <label for="currencyUnit">Currency</label>
                </div>
                <span *ngIf="modelValuation.controls['currencyUnit'].touched && modelValuation.controls['currencyUnit'].errors">
                  <span *ngIf="hasError('currencyUnit','required',modelValuation)" class="error-text">Please select currency unit</span>
                </span>
            </div>

                <!-- location -->
                <div class="col-md-6 field">
                    <div class="material-textfield">
                      <input class="new-inp"  formControlName="location" [type]="modelControl.modelValuation.options.location.type" [placeholder]="modelControl.modelValuation.options.location.placeholder"/>
                      <label>Location</label>
                    </div>
                    <span *ngIf="modelValuation.controls['location'].touched && modelValuation.controls['location'].errors">
                      <span *ngIf="hasError('location','required',modelValuation)" class="error-text">Please enter location</span>
                    </span>
                </div>
    
                <!--industry  -->
                <div class="col-md-6 field">
                    <div class="material-textfield">
                      <select id="industry" class="new-inp" formControlName="industry">
                        <option value="" disabled selected>{{ modelControl.modelValuation.options.industry.placeholder }}</option>
                        <option *ngFor="let doc of industries" [value]="doc.industry">{{ doc.industry }}</option>
                      </select>
                      <label for="industry">Industry</label>
                    </div>
                    <span *ngIf="modelValuation.controls['industry'].touched && modelValuation.controls['industry'].errors">
                      <span *ngIf="hasError('industry','required',modelValuation)" class="error-text">Please select industry</span>
                    </span>
                </div>

                <!-- outstanding shares -->
                <div class="col-md-6 field" >
                      <div class="material-textfield">
                        <input class="new-inp" [type]="modelControl.modelValuation.options.outstandingShares.type"  formControlName="outstandingShares" [placeholder]="modelControl.modelValuation.options.outstandingShares.placeholder"/>
                        <label>Outstanding Shares</label>
                  </div>
                  <span *ngIf="modelValuation.controls['outstandingShares'].touched && modelValuation.controls['outstandingShares'].errors">
                    <span *ngIf="hasError('outstandingShares','required',modelValuation)" class="error-text">Please enter outstanding shares</span>
                  </span>
              </div>

              <!-- sub-industry -->
                <div class="col-md-6 field"  *ngIf="modelValuation.controls['industry'].value && subIndustries.length > 0">
                      <div class="material-textfield">
                        <select id="subIndustry" class="new-inp" #subIndustryVal (change)="subIndustryChange(subIndustryVal.value)" formControlName="subIndustry">
                          <option value="" disabled selected>Select sub-industry</option>
                          <option *ngFor="let doc of subIndustries"  [value]="doc._id">{{doc.subIndustry}}</option>
                        </select>
                        <label for="subIndustry">Sub-Industry</label>
                      </div>
                      <span *ngIf="modelValuation.controls['subIndustry'].touched && modelValuation.controls['subIndustry'].errors">
                        <span *ngIf="hasError('subIndustry','required',modelValuation)" class="error-text">Please select sub-industry</span>
                      </span>
                </div>

                <!-- tax rate -->
                <div class="col-md-6 field">
                    <div class="material-textfield">
                      <select id="subIndustry" class="new-inp"formControlName="taxRateType" (change)="onTaxRateChange($event)">
                        <option value="25.17" selected>Default</option>
                        <option *ngFor="let doc of taxRate" [value]="doc.type">{{doc.label}}</option>
                      </select>
                      <label for="subIndustry">Tax Rate</label>
                      <mat-hint *ngIf="taxRateModelBox" class="taxrate-hint">Tax rate is {{taxRateModelBox}}%</mat-hint>
                    </div>
                </div>

              
                <!-- valiuation model selection -->
                <!-- <div class="col-md-12 field" style="    padding-top: 1%;
                padding-bottom: 1%;">
                  <div class="row">
                      <div class="col-md-3 modelview">
                          <mat-label class="model-label">{{modelControl.modelValuation.options.model.placeholder}}:</mat-label>
                      </div>
                      <div class="col-md-9" *ngIf="modelControl.modelValuation.options.model.options">
                          <span *ngFor="let option of modelControl.modelValuation.options.model.options; let i = index">
                          <mat-checkbox [checked]="isSelected(option.value)" [value]="option.value" (change)="toggleCheckbox(option)" formControlName="model" class="example-margin model-checkbox"
                          color="primary">
                          {{option.name}}
                          </mat-checkbox>
                      </span>
                      </div>
                  </div>
              </div> -->

              <!-- going concer -->
              <!-- <div class="col-md-6 mat-radio field" *ngIf="isRelativeValuation('FCFE') || isRelativeValuation('FCFF') || isRelativeValuation('Excess_Earnings')">
                <mat-radio-group class="radio-group-control" formControlName="projectionYearSelect" *ngIf="modelControl.modelValuation.options.projectionYears.options">
                    <mat-radio-button color="primary"  *ngFor="let option of modelControl.modelValuation.options.projectionYears.options"
                    [value]="option.value">{{option.name}}</mat-radio-button>
                </mat-radio-group>
            </div> -->

            
            </div>

            <!-- <div class="row"> -->
                <!-- upload excel documents -->
                <!-- <div class="col-md-6 field upload-doc">
                  <div class="row">
                      <div class="col-md-8">
                          <input
                            type="file"
                            hidden
                            #fileInput
                            accept="image/png, image/jpeg, .pdf, .xlsx"
                            (change)="onFileSelected($event)"
                          />
                          <mat-label class="label">Add provisional Profit Loss and Balance Sheet statements </mat-label>
                          <p class="download">
                            <a [href]="downloadTemplate" target="_blank" style="font-weight: 500;">Download Template!</a>
                          </p>
                        </div>
                        <div class="col-md-4" style="margin-top: auto; margin-bottom: auto;">
                          <button
                            type="button"
                            mat-raised-button
                            [ngClass]="'upload-btn-enabled'"
                            (click)="fileInput.click()"
                          >
                            <mat-icon>cloud_upload</mat-icon> Upload File
                          </button>
                        </div>
                  </div>
              </div> -->
    
              <!-- <div class="col-md-3 field">
                <mat-form-field class="full-width-input mat-relative-val" [floatLabel]="floatLabelType">
                    <mat-label>Reporting Units</mat-label>
                    <mat-select formControlName="reportingUnit" class="mat-select-value">
                        <mat-option *ngFor="let doc of modelControl.reportDetails.options.reportingUnit"  [value]="doc.value">{{doc.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div> -->
    
            <!-- <div class="col-md-3 field">
              <mat-form-field class="full-width-input mat-relative-val" [floatLabel]="floatLabelType">
                  <mat-label>Currency</mat-label>
                  <mat-select formControlName="currencyUnit" class="mat-select-value">
                      <mat-option *ngFor="let doc of modelControl.reportDetails.options.currencyUnit"  [value]="doc.value">{{doc.name}}</mat-option>
                  </mat-select>
              </mat-form-field>
          </div> -->
            <!-- </div> -->

      </form>   
    </div>

    <!-- specify FS details starts -->
    <!-- <div class="outer-wrapper" *ngIf="modelControl.specifyFSDetails.type === 'specifyFSDetails'">
        <h4 class="card-header">{{modelControl.specifyFSDetails.header}}</h4>
        <form [formGroup]="specifyFSDetails">
            <div class="row" >

                <div class="col-md-4 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType" >
                        <mat-select formControlName="terminalGrowthRate" [placeholder]="modelControl.specifyFSDetails.options.terminalRate.placeholder">
                        <mat-option *ngFor="let doc of terminalgrowthRate"  [value]="doc.rate">{{doc.rate}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>
            </div>
          </form>  
    </div> -->
    <!-- specify FS details ends -->

    <!-- model specific calculation starts -->
    <!-- <div class="outer-wrapper" *ngIf="modelControl.modelSpecificCalculationStart.type === 'modelSpecificCalculationStart'">
        <h4 class="card-header">{{modelControl.modelSpecificCalculationStart.header}}</h4>
        <form [formGroup]="modelSpecificCalculation">
            <div class="row" >
                <div class="col-md-4 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType" >
                            <mat-select formControlName="discountRate" [placeholder]="modelControl.modelSpecificCalculationStart.options.discountRate.placeholder">
                            <mat-option *ngFor="let doc of discountR"  [value]="getDocList(doc)">{{doc.label}}</mat-option>
                            </mat-select>
                      </mat-form-field>
                </div>

                <div class="col-md-4 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType">
                        <mat-select formControlName="discountingPeriod" [placeholder]="modelControl.modelSpecificCalculationStart.options.discountPeriod.placeholder">
                        <mat-option *ngFor="let doc of modelControl.modelSpecificCalculationStart.options.discountPeriod.options"  [value]="doc.name">{{doc.name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>

                <div class="col-md-4 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType" >
                        <mat-select formControlName="betaType" [placeholder]="modelControl.modelSpecificCalculationStart.options.betaType.placeholder">
                        <mat-option [disabled]="!modelValuation.controls['industry'].value" *ngFor="let doc of modelControl.modelSpecificCalculationStart.options.betaType.options"  [value]="doc.value" >{{doc.name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>

                <div class="col-md-4 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType" >
                        <mat-select formControlName="coeMethod" [placeholder]="modelControl.modelSpecificCalculationStart.options.coeMethod.placeholder">
                        <mat-option *ngFor="let doc of equityM"  [value]="doc.type">{{doc.label}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>

                <div class="col-md-4 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType" >
                        <mat-select formControlName="riskFreeRate" [placeholder]="modelControl.modelSpecificCalculationStart.options.riskFreeRate.placeholder">
                        <mat-option *ngFor="let doc of indianTreasuryY"  [value]="doc.latest">Yield on {{ doc.maturityInYrs }} Years Indian Treasury Bond</mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>

                <div class="col-md-4 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType" >
                        <mat-select formControlName="expMarketReturnType" [placeholder]="modelControl.modelSpecificCalculationStart.options.expMarketReturnType.placeholder">
                        <mat-option *ngFor="let doc of modelControl.modelSpecificCalculationStart.options.expMarketReturnType.options"  [value]="doc">{{doc.name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>

                <div class="col-md-4 field">
                <mat-form-field class="full-width-input" [floatLabel]="floatLabelType">
                    <input formControlName="otherAdj" [type]="modelControl.modelSpecificCalculationStart.options.otherAdj.type" matInput  [placeholder]="modelControl.modelSpecificCalculationStart.options.otherAdj.placeholder">
                </mat-form-field>
                </div>
            </div>
          </form>  
    </div> -->
    <!-- model specific calculation ends -->

    <!-- WACC section starts -->
    <!-- <div class="outer-wrapper" *ngIf="(modelSpecificCalculation.controls['discountRate'].value === 'WACC' || isRelativeValuation(MODEL.FCFF) )&&  modelControl.waccCalculations.type === 'waccCalculations'">
    
        <h4 class="card-header">{{modelControl.waccCalculations.header}}</h4>
        <form [formGroup]="waccCalculation">
            <div class="row" >
                <div class="col-md-6 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType" >
                        <mat-select formControlName="riskPremium" [placeholder]="modelControl.waccCalculations.options.riskPremium.placeholder">
                        <mat-option *ngFor="let doc of rPremium"  [value]="doc.riskPremium">{{doc.riskPremium}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>

                <div class="col-md-6 field">
                    <mat-form-field class="full-width-input" [floatLabel]="floatLabelType" >
                        <mat-select formControlName="capitalStructureType" [placeholder]="modelControl.waccCalculations.options.capitalStructureType.placeholder">
                        <mat-option *ngFor="let doc of cStructure"  [value]="doc.type">{{doc.label}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                </div>

                <div class="col-md-6 field">
                    
                <mat-form-field class="full-width-input" [floatLabel]="floatLabelType">
                    <input formControlName="copShareCapital" [type]="modelControl.waccCalculations.options.copShareCapital.type" matInput  [placeholder]="modelControl.waccCalculations.options.copShareCapital.placeholder">
                </mat-form-field>
                </div>

                <div class="col-md-6 field">
                    
                <mat-form-field class="full-width-input" [floatLabel]="floatLabelType">
                    <input formControlName="costOfDebt" [type]="modelControl.waccCalculations.options.costOfDebt.placeholder" matInput  [placeholder]="modelControl.waccCalculations.options.costOfDebt.placeholder">
                </mat-form-field>
                </div>
            </div>
          </form>  
    </div>

    <div class="outer-wrapper" *ngIf="modelControl.relativeValuation.type === 'relativeValuation' && isRelativeValuation(MODEL.RELATIVE_VALUATION)">
        <h4 class="card-header">{{modelControl.relativeValuation.header}}</h4>
        <form [formGroup]="relativeValuation">
            <div class="row" style="padding-top: 1%;">
                <div class="col-md-2 revalmodel">
                    <mat-label class="label">{{modelControl.relativeValuation.options.preferenceRatioSelect.placeholder}}</mat-label>
                </div>
                <div class="col-md-8">
                    <mat-radio-group formControlName="preferenceRatioSelect" *ngIf = "modelControl.relativeValuation.options.preferenceRatioSelect.options">
                        <mat-radio-button  *ngFor="let option of modelControl.relativeValuation.options.preferenceRatioSelect.options"
                        [value]="option.name">{{option.name}}</mat-radio-button>
                    </mat-radio-group>
                </div>
                
              <div formArrayName="companies" class="col-md-12 field" *ngIf="relativeValuation.controls['preferenceRatioSelect'].value==='Company Based' && preferenceCompanies.length > 0">
                <div class="row">
                  <div class="col-md-4 field" *ngFor="let c of Companies.controls; let i = index; let last = last">
                    <mat-form-field  [floatLabel]="floatLabelType">
                      <mat-select [placeholder]="modelControl.relativeValuation.options.companyBasedSelection.placeholder" [formControlName]="i">
                        <mat-option [disabled]="item.company === 'No company Found'" [value]="item" *ngFor="let item of preferenceCompanies">{{item.company}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                    <button mat-icon-button color="primary" *ngIf="i === preferenceCompanies.length - 1 ? false :true" (click)="addInput()">
                      <mat-icon>add</mat-icon>
                    </button>
                    <button mat-icon-button color="warn" *ngIf="i > 0" (click)="removeField(i)">
                      <mat-icon>remove</mat-icon>
                    </button>
                  </div>
                </div>
              </div>
              <div formArrayName="industries" class="col-md-12 field" *ngIf="relativeValuation.controls['preferenceRatioSelect'].value==='Industry Based' && industries.length > 0">
                <div class="row">
                  <div class="col-md-4 field" *ngFor="let c of Industries.controls; let i = index; let last = last">
                    <mat-form-field  [floatLabel]="floatLabelType">
                      <mat-select [placeholder]="modelControl.relativeValuation.options.industryBasedSelection.placeholder" [formControlName]="i">
                        <mat-option [disabled]="item.industry === 'No industry Found'" [value]="item._id" *ngFor="let item of prefrerenceIndustries">{{item.industry}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                    <button mat-icon-button color="primary" (click)="addInputIndustry()" *ngIf="i === prefrerenceIndustries.length - 1 ? false :true">
                      <mat-icon>add</mat-icon>
                    </button>
                    <button mat-icon-button color="warn" *ngIf="i > 0" (click)="removeFieldIndustry(i)">
                      <mat-icon>remove</mat-icon>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </form>  
    </div>  -->
    <!-- relative valuation ends -->
    <div class="row" style="padding-bottom: 1%;padding-top: 1%;">
      <div class="col-xl-6">
        <div style="padding-left: 4%;text-align: left;" class="container">
          <button (click)="selectValuation()" [ngClass]="modelSelectStatus ? 'model-button' : 'show-button-grad'" mat-raised-button>
              Select Valuation Model
           </button>
           <span *ngIf="!modelSelectStatus" class="error-text">Please select valuation model</span>
          </div>
      </div>
      <div class="col-xl-12" style="padding-left: 2%;padding-right: 3%;padding-top: 1%;" *ngIf="modelValuation.controls['model'].value.length > 0">
        <div class="chip-container">
          <div class="chip" *ngFor="let indModel of modelValuation.controls['model'].value" style="padding-left: 2%;padding-right: 7%;padding-top: 2%;padding-bottom: 2%;">
            {{ allModels[indModel] }}
            <span class="icon-container">
              <!-- <mat-icon class="check-icon">beenhere</mat-icon> -->
              <!-- <mat-icon>offline_pin</mat-icon> -->
              <mat-icon>done_all</mat-icon>
              <!-- <mat-icon>done_outline</mat-icon> -->
            </span>
            <!-- <span style="position: absolute;top: 0%;left: 12%;top: 18%;"><mat-icon style="color: green;"> beenhere</mat-icon> </span> -->
            <span class="close-btn" (click)="removeTag(indModel)">&times;</span>
          </div>
        </div>
      </div>
      <div class="col-xl-12" *ngIf="fileName" style="padding-top: 1%;">
        <div class="filename-container" >
          <div class="title">Uploaded filename:</div>
          <span class="filename">{{fileName}}</span>
        </div>
      </div>
      <div [ngClass]="fileName || modelValuation.controls['model'].value.length > 0 ? 'col-xl-12' : 'col-xl-6'">
        <div [ngStyle]="(fileName || modelValuation.controls['model'].value.length > 0) ? { 'padding-right': '2%', 'text-align': 'right' } : { 'padding-right': '4%', 'text-align': 'right' }" class="container">
          <button (click)="saveAndNext()" [ngClass]="fileName || modelValuation.controls['model'].value.length > 0 ? 'button-resave-mat' : 'button-save-mat'" mat-raised-button>
              Next
              <span class="button-save"><mat-icon style="font-weight: bold;color: #ffffff;">send</mat-icon></span>
           </button>
          </div>
      </div>
    </div>
</div>
