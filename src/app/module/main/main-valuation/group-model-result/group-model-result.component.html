<!-- valuation results starts -->
<div class="outer-wrapper">
    <div class="mydiv" style="border-top: 1px solid #e3e3f7;border-bottom:1px solid #e3e3f7;">
        <h4 class="card-header-2" style="border-top: none;">Valuation Results</h4>
        <h4 class="card-header-2" style="margin-left: auto;">Valuation Date {{transferStepperthree?.formOneAndTwoData?.valuationDate | date:'MMM d, yyyy'}}</h4>
    </div>
    <!-- <h4 class="card-header">Valuations Results</h4> -->
   <div >
    <app-valuation-result-table [transferStepperthree]="transferStepperthree"></app-valuation-result-table>
   </div>
</div>
<!-- valuation results ends -->

<!-- modal weightage starts -->
<div class="outer-wrapper" style="padding-top: 3%;" *ngIf="transferStepperthree?.formOneAndTwoData?.model.length > 1">
    <h4 class="card-header" >Model Weightage</h4>
    <div class="container">
        <div class="row">
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('FCFE')">
                <p style="font-weight: 500;font-size: 17px;margin-bottom: 0px;">FCFE</p>
            </div>
            <div class="col-md-6" style="text-align: right;border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('FCFE')">
                <div class="row">
                    <div class="col-md-11">
                        <mat-slider
                        class="example-margin mat-accent"
                        [disabled]="'false'"
                        [max]="'100'"
                        [min]="'0'"
                        [step]="'1'"
                        [discrete]="'false'"
                        [showTickMarks]="'false'"
                        style="width: 50%;"
                        (input)="onFcfeSliderChange($event)">
                        <input [(ngModel)]="fcfeSlider" matSliderThumb>
                    </mat-slider>
                    </div>
                    <div class="col-md-1" style="margin-top: auto;margin-bottom: auto;">
                        <span class="fcfe-slider" >{{fcfeSlider}}</span>
                    </div>
                </div>
                
            </div>
            <hr class="weight-hr">
    
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('FCFF')">
                <p style="font-weight: 500;font-size: 17px;margin-bottom: 0px;">FCFF</p>
            </div>
            <div class="col-md-6" style="text-align: right;border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('FCFF')">
                <div class="row">
                    <div class="col-md-11">
                        <mat-slider
                            class="example-margin mat-accent"
                            [disabled]="'false'"
                            [max]="'100'"
                            [min]="'0'"
                            [step]="'1'"
                            [discrete]="'false'"
                            [showTickMarks]="'false'"
                            style="width: 50%;"
                            (input)="onFcffSliderChange($event)">
                            <input [(ngModel)]="fcffSlider" matSliderThumb>
                        </mat-slider>
                    </div>
                    <div class="col-md-1" style="margin-top: auto;margin-bottom: auto;">
                        <span class="fcfe-slider" >{{fcffSlider}}</span>
                    </div>
                </div>
            </div>
            <hr class="weight-hr">
    
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('Relative_Valuation')">
                <p style="font-weight: 500;font-size: 17px;margin-bottom: 0px;">Comparable Companies</p>
            </div>
            <div class="col-md-6" style="text-align: right;border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('Relative_Valuation')">
                <div class="row">
                    <div class="col-md-11">
                        <mat-slider
                            class="example-margin mat-accent"
                            [disabled]="'false'"
                            [max]="'100'"
                            [min]="'0'"
                            [step]="'1'"
                            [discrete]="'false'"
                            [showTickMarks]="'false'"
                            style="width: 50%;"
                            (input)="onRelativeValSliderChange($event)">
                            <input [(ngModel)]="relativeValSlider" matSliderThumb>
                        </mat-slider>
                    </div>
                    <div class="col-md-1" style="margin-top: auto;margin-bottom: auto;">
                        <span class="fcfe-slider" >{{relativeValSlider}}</span>
                    </div>
                </div>
                

            </div>
            <hr class="weight-hr">
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('CTM')">
                <p style="font-weight: 500;font-size: 17px;margin-bottom: 0px;">Comparable Industries</p>
            </div>
            <div class="col-md-6" style="text-align: right;border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('CTM')">
                <div class="row">
                    <div class="col-md-11">
                        <mat-slider
                            class="example-margin mat-accent"
                            [disabled]="'false'"
                            [max]="'100'"
                            [min]="'0'"
                            [step]="'1'"
                            [discrete]="'false'"
                            [showTickMarks]="'false'"
                            style="width: 50%;"
                            (input)="onComparableIndustrySliderChange($event)">
                            <input [(ngModel)]="comparableIndustrySlider" matSliderThumb>
                        </mat-slider>
                    </div>
                    <div class="col-md-1" style="margin-top: auto;margin-bottom: auto;">
                        <span class="fcfe-slider" >{{comparableIndustrySlider}}</span>
                    </div>
                </div>
                

            </div>
            <hr class="weight-hr">

            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('Excess_Earnings')">
                <p style="font-weight: 500;font-size: 17px;margin-bottom: 0px;">Excess Earning</p>
            </div>
            <div class="col-md-6" style="text-align: right;border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('Excess_Earnings')">
                <div class="row">
                    <div class="col-md-11">
                        <mat-slider
                        class="example-margin mat-accent"
                        [disabled]="'false'"
                        [max]="'100'"
                        [min]="'0'"
                        [step]="'1'"
                        [discrete]="'false'"
                        [showTickMarks]="'false'"
                        style="width: 50%;"
                        (input)="onExcessEarnSliderChange($event)">
                        <input [(ngModel)]="excessEarnSlider" matSliderThumb>
                    </mat-slider>
                    </div>
                    <div class="col-md-1" style="margin-top: auto;margin-bottom: auto;">
                        <span class="excessEarn-slider" >{{excessEarnSlider}}</span>
                    </div>
                </div>
                
            </div>
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('NAV')">
                <p style="font-weight: 500;font-size: 17px;margin-bottom: 0px;">Net Asset value</p>
            </div>
            <div class="col-md-6" style="text-align: right;border-bottom:1px  solid #d6d0d0;" *ngIf="checkModel('NAV')">
                <div class="row">
                    <div class="col-md-11">
                        <mat-slider
                        class="example-margin mat-accent"
                        [disabled]="'false'"
                        [max]="'100'"
                        [min]="'0'"
                        [step]="'1'"
                        [discrete]="'false'"
                        [showTickMarks]="'false'"
                        style="width: 50%;"
                        (input)="onNavSliderChange($event)">
                        <input [(ngModel)]="navSlider" matSliderThumb>
                    </mat-slider>
                    </div>
                    <div class="col-md-1" style="margin-top: auto;margin-bottom: auto;">
                        <span class="excessEarn-slider" >{{navSlider}}</span>
                    </div>
                </div>
                
            </div>
            <hr class="weight-hr">
        </div>
    </div>
</div>
<!-- modal weightage ends -->

<!-- Model Weigtage Result starts -->
<div class="outer-wrapper" style="padding-top: 3%;" *ngIf="data">
    <h4 class="card-header" >Model Weightage Result</h4>
    <table>
        <thead>
          <tr>
            <th>Model</th>
            <th>Indicated Value</th>
            <th>Weight</th>
            <th>Weighted Value</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of data">
            <td style="text-transform: capitalize;">{{ item.model === 'Relative_Valuation' ? 'Comparable Companies' : item.model === 'CTM' ? 'Comparable Industries'  : item.model }}</td>
            <td>{{ item.indicatedValue | currency:'INR':'symbol':'1.0-2' }}</td>
            <td>{{ item.weight | percent:'1.0-2' }}</td>
            <td>{{ item.weightedValue | currency:'INR':'symbol':'1.0-2' }}</td>
          </tr>
          <tr>
            <td colspan="3" class="bottom-head">Weighted Average Value</td>
            <td class="bottom-val">{{ finalWeightedValue !==0 && finalWeightedValue ? (finalWeightedValue.toFixed(2) | currency:'INR':'symbol':'1.0-2') : finalWeightedValue }}</td>
          </tr>
        </tbody>
      </table>
</div>
<!-- Model Weigtage Result ends -->

<div class="text-center" style="padding-bottom: 1%;padding-top: 1%;">
    <button (click)="previous()" mat-raised-button style="box-shadow: 1px 2px 15px #d1d1d1;color:#bb0d0d;font-weight: bold !important;margin-right: 1%;">
        Back
        <mat-icon style="font-weight: bold;color: #d42121;">arrow_left</mat-icon>
    </button>
    <button style="box-shadow: 1px 2px 15px #d1d1d1;color:#228822;margin-right: 1%"  mat-raised-button>
   
        <mat-icon style="font-weight: bold;color: green;">send</mat-icon>
        <a [href]="'https://localhost:3000/upload/generate/' + (transferStepperthree?.formThreeData?.appData?.reportId || 'null') +'/null/' + 'false'" download style="color:#228822;">Submit</a>
    </button>
</div>

<div class="loader-overlay" *ngIf="isLoader">
    <div class="loader">
      <div class="loader-spinner"></div>
      <div class="loader-message">Please wait...</div>
    </div>
  </div>