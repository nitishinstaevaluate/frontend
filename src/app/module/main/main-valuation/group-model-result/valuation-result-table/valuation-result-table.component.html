<div class="mat-tab-g">
  <mat-tab-group style="padding-bottom: 1% !important;background-color: #ffffff;border-radius: 20px;" class="tab-group" mat-stretch-tabs="false" mat-align-tabs="start" [selectedIndex]="selectedTabIndex" (selectedTabChange)="onTabSelectionChange()">
  <mat-tab label="FCFE" *ngIf = "fcfe">
    <div class="btn" style="text-align: right;width: 100%;">
      <button mat-stroked-button class="exp">
        <a class="exp-a" [href]="HOST + 'upload/generate/' + (transferStepperthree?.formFourData?.appData?.reportId || 'null') +'/FCFE/' + 'true'" download>Export</a>
      </button>
    </div>
    <div>
      <div class="table-container">
        <!-- fcfe table starts -->
      <div class="scroll-container">
        <table [ngClass]="contentIsBig(dataSourceFcfe) ? 'increase-table-width' : ''" #dynamicTable>
          <thead>
            <tr style="text-transform: capitalize;" class="header">
              <th *ngFor="let columnName of fcfeColumn" [ngClass]="columnName === 'particulars' ?  contentIsBig(dataSourceFcfe) ? 'sticky-header' : '' : ''">{{ columnName }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of dataSourceFcfe;let i = index" class="content">
              <td style="text-align: center;font-size: 14px;text-transform: capitalize;" [ngClass]="checkVal(cellValue,'fcfe') ? contentIsBig(dataSourceFcfe) ?  (i % 2 === 0  ? 'make-bold line-item-even' : 'make-light line-item-odd')  : 'make-light': 'make-light'" *ngFor="let cellValue of row">{{isDiscountingFactor(row) ?  formatNumber(cellValue, true) : formatNumber(cellValue)}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- fcfe table ends -->
      </div>
  </div>
  </mat-tab>
   <mat-tab label="FCFF" *ngIf = "fcff">
    <div class="btn" style="text-align: right;width: 100%;">
      <button mat-stroked-button class="exp">
        <a class="exp-a" [href]="HOST + 'upload/generate/' + (transferStepperthree?.formFourData?.appData?.reportId || 'null') +'/FCFF/' + 'true'" download>Export</a>
      </button>
    </div>
    <div>
      <!-- <h5 class="company-head-fcff">FCFF Result</h5> -->
      <div class="table-container" #dynamicTable>
        <!-- table fcff  starts -->
        <table [ngClass]="contentIsBig(dataSourceFcff) ? 'increase-table-width' : ''">
          <thead>
            <tr style="text-transform: capitalize;" class="header">
              <th *ngFor="let columnName of fcffColumn" [ngClass]="columnName === 'particulars' ?  contentIsBig(dataSourceFcff) ? 'sticky-header' : '' : ''">{{ columnName }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of dataSourceFcff;let i = index" class="content">
              <td style="text-align: center;font-size: 14px;text-transform: capitalize;" [ngClass]="checkVal(cellValue,'fcff') ? contentIsBig(dataSourceFcff) ?  (i % 2 === 0  ? 'make-bold line-item-even' : 'make-light line-item-odd')  : 'make-light' : 'make-light'" *ngFor="let cellValue of row">{{ isDiscountingFactor(row) ?  formatNumber(cellValue, true) : formatNumber(cellValue) }}</td>
            </tr>
          </tbody>
        </table>
        <!-- table fcff  ends -->
      </div>
    </div>
  </mat-tab>
  <mat-tab label="Excess Earning" *ngIf = "excessEarn">
    <div class="btn" style="text-align: right;width: 100%;">
      <button mat-stroked-button class="exp">
        <a class="exp-a" [href]="HOST + 'upload/generate/' + (transferStepperthree?.formFourData?.appData?.reportId || 'null') +'/Excess_Earnings/' + 'true'" download>Export</a>
      </button>
    </div>
    <div>
      <h5 class="company-head-excEarn">Excess Earning Result</h5>
      <div class="table-container">
        <!-- excess earning table starts -->
      <table>
        <thead>
          <tr style="text-transform: capitalize;" class="header">
            <th *ngFor="let columnName of excessEarnColumn">{{ columnName }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of dataSourceExcessEarn" class="content">
            <td style="text-align: center;font-size: 14px;text-transform: capitalize;" [ngClass]="checkVal(cellValue,'Excess_Earnings') ? 'make-bold' : 'make-light'" *ngFor="let cellValue of row">{{ isDiscountingFactor(row) ?  formatNumber(cellValue, true) : formatNumber(cellValue) }}</td>
          </tr>
        </tbody>
      </table>
      <!-- excess earning table ends -->
      </div>
  </div>
  </mat-tab> 
  <mat-tab [label]="checkIndustryOrCompany() ? 'Comparable Companies' : 'Comparable Transaction'" *ngIf="relativeVal">
    <div class="btn" style="text-align: right;width: 100%;">
      <button mat-stroked-button class="exp">
        <a class="exp-a" [href]="HOST + 'upload/generate/' + (transferStepperthree?.formFourData?.appData?.reportId || 'null') + (checkIndustryOrCompany() ? '/Relative_Valuation/' : '/CTM/') + 'true'" download>Export</a>
      </button>
    </div>
    <div>
        <!-- <h5 class="company-head-relativeval">Relative Valuations Result</h5> -->
        <div class="table-container" style="display: block;">
        <app-relative-valuations-table [tableData]="tableData" [formData]="formData"></app-relative-valuations-table>
          <div class="mt-4">
            <app-model-relative-valuation-result-table [dataSource]="valuationDataReport" [formData]="formData"></app-model-relative-valuation-result-table>
          </div>
      </div>
    </div>  
  </mat-tab>
  <mat-tab label="Net Asset Value" *ngIf="nav">
    <div class="btn" style="text-align: right;width: 100%;">
      <button mat-stroked-button class="exp">
        <a class="exp-a" [href]="HOST + 'upload/generate/' + (transferStepperthree?.formFourData?.appData?.reportId || 'null') + '/NAV/' + 'true'" download>Export</a>
      </button>
    </div>
    <div>
      <!-- <h5 class="head-nav">NAV Result</h5> -->
      <div class="table-container">
        <table>
          <thead>
            <tr class="header">
              <th style="padding-left: 4%;">Particulars</th>
              <!-- <th>Type</th> -->
              <th style="padding-left: 4%;">Book Value</th>
              <th style="padding-left: 4%;">Fair Value</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of dataSourceNav" class="content">
              <td [ngClass]="item.fieldName === 'Non Current Assets' || item.fieldName === 'Total Non Current Assets' || item.fieldName === 'Net Current Assets' || item.fieldName === 'Firm Value' || item.fieldName === 'Equity Value' || item.fieldName === 'Value per share' ? 'nav-style-header' : 'nav-style-sub-header'">{{ item.fieldName }}</td>
              <!-- <td class="nav-style-sub-text">{{ item.type }}</td> -->
              <td class="nav-style-sub-text">{{ formatNumber(item.bookValue)  }}</td>
              <td class="nav-style-sub-text">{{ formatNumber(item.fairValue)  }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </mat-tab>
  <mat-tab label="Rule 11 UA" *ngIf="ruleElevenUa">
    <div class="btn" style="text-align: right;width: 100%;">
      <button mat-stroked-button class="exp">
        <a class="exp-a" [href]="HOST + 'upload/export-eleven-ua/' + (transferStepperthree?.formFourData?.appData?._id || 'null')" download>Export</a>
      </button>
    </div>
    <div>
      <div class="table-container" style="display: block;">
        <app-model-rule-eleven-ua-result-table [formData]="transferStepperthree"></app-model-rule-eleven-ua-result-table>
      </div>
    </div>
  </mat-tab>
</mat-tab-group>
<p class="currency-unit" *ngIf="transferStepperthree?.formOneAndThreeData?.excelSheetId && !isOnlyMarketApproach()">Amount in {{transferStepperthree?.formOneAndThreeData?.currencyUnit}} 
  {{transferStepperthree?.formOneAndThreeData?.reportingUnit === 'absolute' ? '' : (transferStepperthree?.formOneAndThreeData?.reportingUnit)}}</p>
</div>
<div class="loader-overlay" *ngIf="isLoader">
  <div class="loader">
    <div class="loader-spinner"></div>
    <div class="loader-message">Please wait...</div>
  </div>
</div>